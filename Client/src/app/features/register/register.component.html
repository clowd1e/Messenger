<div class="container">
    <div class="logo">
        <img src="/images/logo.png" alt="Logo">
        <h1>MessengerM</h1>
    </div>
    <form class="register-form" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <div class="form-input">
            <app-auth-input
                [svgConfig]="usernameIcon"
                [inputType]="'text'"
                [inputPlaceholder]="'Type your username'"
                formControlName="username"></app-auth-input>
            <app-auth-error-box
                [errors]="formConfiguration['username'].controlErrors()"
                [errorMessagesConfig]="formConfiguration['username'].errorMessagesConfig()"
                [inputTouchedOrDirty]="formConfiguration['username'].controlTouchedOrDirty()"></app-auth-error-box>
        </div>
        <div class="form-input">
            <app-auth-input
                [svgConfig]="nameIcon"
                [inputType]="'text'"
                [inputPlaceholder]="'Type your name'"
                formControlName="name"></app-auth-input>
            <app-auth-error-box
                [errors]="formConfiguration['name'].controlErrors()"
                [errorMessagesConfig]="formConfiguration['name'].errorMessagesConfig()"
                [inputTouchedOrDirty]="formConfiguration['name'].controlTouchedOrDirty()"></app-auth-error-box>
        </div>
        <!-- @if (formControlInvalid('name')) {
            @if (formControlContainsError('name', 'required')) {
                <p class="error-message">Name is required</p>
            }
            @else if (formControlContainsError('name', 'minlength')) {
                <p class="error-message">Name must be at least 1 characters long</p>
            }
            @else if (formControlContainsError('name', 'maxlength')) {
                <p class="error-message">Name must be at most 30 characters long</p>
            }
        } -->
        <div class="form-input">            
            <app-auth-input
                [svgConfig]="emailIcon"
                [inputType]="'email'" 
                [inputPlaceholder]="'Type your email'"
                formControlName="email"></app-auth-input>
            <app-auth-error-box
                [errors]="formConfiguration['email'].controlErrors()"
                [errorMessagesConfig]="formConfiguration['email'].errorMessagesConfig()"
                [inputTouchedOrDirty]="formConfiguration['email'].controlTouchedOrDirty()"></app-auth-error-box>
        </div>
        <!-- @if (formControlInvalid('email')) {
            @if (formControlContainsError('email', 'required')) {
                <p class="error-message">Email is required</p>
            } @else if (formControlContainsError('email', 'email')) {
                <p class="error-message">Email must be a valid email address</p>
            } @else if (formControlContainsError('email', 'maxlength')) {
                <p class="error-message">Email must be at most 50 characters long</p>
            }
        } -->
        <div class="form-input">
            <app-auth-input
                [svgConfig]="passwordIcon"
                [inputType]="'password'"
                [inputPlaceholder]="'Type your password'"
                formControlName="password"></app-auth-input>
            <app-auth-error-box
                [errors]="formConfiguration['password'].controlErrors()"
                [errorMessagesConfig]="formConfiguration['password'].errorMessagesConfig()"
                [inputTouchedOrDirty]="formConfiguration['password'].controlTouchedOrDirty()"></app-auth-error-box>
        </div>
        <!-- @if (formControlInvalid('password')) {
            @if (formControlContainsError('password', 'required')) {
                <p class="error-message">Password is required</p>
            } @else if (formControlContainsError('password', 'minlength')) {
                <p class="error-message">Password must be at least 8 characters long</p>
            } @else if (formControlContainsError('password', 'maxlength')) {
                <p class="error-message">Password must be at most 30 characters long</p>
            } @else if (formControlContainsError('password', 'pattern')) {
                <p class="error-message">{{ registerForm.controls.password.errors?.["pattern"] }}</p>
            }
        } -->
        <div class="form-input">
            <app-auth-input
                [svgConfig]="passwordIcon"
                [inputType]="'password'"
                [inputPlaceholder]="'Repeat your password'"
                formControlName="repeatPassword"></app-auth-input>
            <app-auth-error-box
                [errors]="formConfiguration['repeatPassword'].controlErrors()"
                [errorMessagesConfig]="formConfiguration['repeatPassword'].errorMessagesConfig()"
                [inputTouchedOrDirty]="formConfiguration['repeatPassword'].controlTouchedOrDirty()"></app-auth-error-box>
        </div>
        <!-- @if (formControlInvalid('repeatPassword')) {
            @if (formControlContainsError('repeatPassword', 'required')) {
                <p class="error-message">Repeat password is required</p>
            }@else if (formControlContainsError('repeatPassword', 'repeat')) {
                <p class="error-message">Passwords must match</p>
            }
        } -->

        <app-auth-button
            class="register-button"
            [disabled]="submitButtonDisabled()"
            [buttonText]="'Sign up'"></app-auth-button>
    </form>

    <div class="footer">
        <p>Back to <a class="link-message" [routerLink]="['/login']">Sign in</a> page</p>
        <p>Didn't get confirmation email? <a class="link-message" [routerLink]="['/resend-confirm-email']">Request new</a></p>
    </div>
</div>